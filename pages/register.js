import { AuthLink, Input, Button, Gap } from "@components/atoms";
import { Form, Footer } from "@components/molecules";
import React, { useState, useEffect } from "react";

import Head from "next/head";

function checkConfirmPassword(thisConfirmPassword, passwordRelated) {
    console.log(thisConfirmPassword.value, passwordRelated.value);
    if (thisConfirmPassword.value || passwordRelated.value) {
        const errorTag = document.querySelector(
            `.input-error-message[data-input-id="#${thisConfirmPassword.id}"]`
        );
        const isPasswordNotSame =
            thisConfirmPassword.value !==
            document.querySelector(passwordRelated).value;
        console.log(errorTag);

        if (errorTag) {
            if (isPasswordNotSame) {
                errorTag.classList.remove("d-none");
                errorTag.textContent = "Password tidak sama";
            } else {
                errorTag.classList.add("d-none");
                errorTag.textContent = null;
                errorTag.textContent = null;
            }
        }
    }

    // console.log(thisConfirmPassword.value, passwordRelated.value);
}

function Register() {
    return (
        <div className="h-full min-h-screen bg-primary text-white flex flex-col">
            <Head>
                <title>Toqcer | Register</title>
                <meta
                    name="description"
                    content="Generated by create next app"
                />
                <link rel="icon" href="/favicon.ico" />
            </Head>
            <div className="flex-1 flex flex-col items-center">
                <h1 className="text-orange font-bold text-4xl my-14">ToqCer</h1>
                {/* Form */}
                <div className="max-w-2xl w-full">
                    <Form title="Sign Up" autoComplete="off">
                        <div className="px-2">
                            <Input
                                label="name"
                                placeholder="Name"
                                type="text"
                                required
                            />
                            <Gap height={15} />
                            <Input
                                label="email"
                                placeholder="Email"
                                type="email"
                                required
                            />
                            <Gap height={15} />
                            <Input
                                label="Telephone"
                                placeholder="Masukan Nomor Telephone"
                                type="tel"
                                onInput={(e) => {
                                    e.target.value = e.target.value
                                        .replace(/[^0-9.]/g, "")
                                        .replace(/(\..*?)\..*/g, "$1");
                                }}
                                required
                            />
                            <Gap height={15} />
                            <Input
                                label="password"
                                placeholder="Password"
                                type="password"
                                autoComplete="new-password"
                                id="new-password"
                                onBlur={(e) =>
                                    checkConfirmPassword(
                                        e.target,
                                        "#new-password"
                                    )
                                }
                                required
                            />
                            <Gap height={25} />
                            <Input
                                label="Confirm Password"
                                placeholder="Masukan password sekali lagi"
                                type="password"
                                id="confirm-password"
                                autoComplete="new-password"
                                onBlur={(e) =>
                                    checkConfirmPassword(
                                        e.target,
                                        "#new-password"
                                    )
                                }
                                required
                            />
                            <small
                                className="input-error-message text-red-500 hidden"
                                data-input-id="#confirm-password"
                            ></small>
                            <Gap height={25} />

                            <Button className="rounded-lg">
                                Create account
                            </Button>
                        </div>
                    </Form>
                    <div className="flex justify-between text-sm px-2 py-3 text-muted ">
                        <AuthLink href="/" title="Sign in" />
                    </div>
                </div>
                {/* Form End */}
            </div>
            <Footer />
        </div>
    );
}

export default Register;
